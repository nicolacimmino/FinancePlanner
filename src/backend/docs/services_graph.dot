
digraph architecture {
  rankdir=LR;


  subgraph edge_services {
      api_gateway -> { tokens, users, user_assets, discovery_service };
  }

  subgraph microservices {
      rank = same; tokens; users; user_assets;
  }

  subgraph ancillary_services {
        tokens -> { database, config_server };
        users -> database;
        user_assets -> database;
        users -> tokens [color="purple"]
        user_assets -> tokens [color="purple"]
        discovery_service -> { tokens, users, user_assets }
  }
}